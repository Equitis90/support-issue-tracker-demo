%div{:class => 'well centered'}
  %h1 Tickets
  %br
  #tabs
    %ul
      %li
        %a{:href => "#all"} All tickets
      -TicketStatus.all.each do |status|
        %li
          %a{:href => "##{status.id}"}= status.title
    #all
    -TicketStatus.all.each do |status|
      %div{:id => "#{status.id}"}
    #table{:style => 'border-radius: 25px; padding: 20px; background: #B8E6B8;'}
      %table{:id => "table_id", :class => "display"}
        %thead
          %tr
            %th ID
            %th Reference
            %th Department
            %th Status
            %th Creator_name
            %th Creator_email
        %tbody
          -@tickets.each do |ticket|
            %tr
              %td= ticket[:id]
              %td= link_to ticket[:reference], ticket_path(:reference => ticket[:reference])
              %td= ticket[:department]
              %td= ticket[:status]
              %td= ticket[:creator_name]
              %td= ticket[:creator_email]

:javascript
  $(document).ready( function () {
    $("#tabs").tabs({
      active: parseInt("#{@active_tab}")
    });
    $('#tabs ul li a').click(function (event) {
      window.location.href="#{tickets_path}?id=" + this.getAttribute("href");
      alert(window.location.href);
    });
    var array = [0];
    if("#{@user[:department_id]}" != "") array[1] = 2;
    $('#table_id').DataTable({
    "order": [[ 1, "asc" ]],
    "columnDefs": [
            {
                "targets": array,
                "visible": false
            }
        ]
    });
  } );